<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.16: http://docutils.sourceforge.net/" />
<title>Extraction.v</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="tango_subtle.css" type="text/css" />
<link rel="stylesheet" href="tango_subtle.min.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
</head>
<body>
<div class="alectryon-root alectryon-floating"><div class="document">


<pre class="alectryon-io"><!-- Generator: Alectryon v1.0 --><span class="coq-wsp"><span class="highlight"><span class="c">(*</span>
<span class="c"> * Vericert: Verified high-level synthesis.</span>
<span class="c"> * Copyright (C) 2019-2020 Yann Herklotz &lt;yann@yannherklotz.com&gt;</span>
<span class="c"> *</span>
<span class="c"> * This program is free software: you can redistribute it and/or modify</span>
<span class="c"> * it under the terms of the GNU General Public License as published by</span>
<span class="c"> * the Free Software Foundation, either version 3 of the License, or</span>
<span class="c"> * (at your option) any later version.</span>
<span class="c"> *</span>
<span class="c"> * This program is distributed in the hope that it will be useful,</span>
<span class="c"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c"> * GNU General Public License for more details.</span>
<span class="c"> *</span>
<span class="c"> * You should have received a copy of the GNU General Public License</span>
<span class="c"> * along with this program.  If not, see &lt;https://www.gnu.org/licenses/&gt;.</span>
<span class="c"> *)</span>

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">From</span> vericert <span class="kn">Require</span>
     Verilog
     Compiler
     RTLBlockgen
     RTLBlock
     HTLSchedulegen
     HTLgen.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">From</span> Coq <span class="kn">Require</span> DecidableClass.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">From</span> compcert <span class="kn">Require</span>
    Coqlib
    Wfsimpl
    Decidableplus
    AST
    Iteration
    Floats
    SelectLong
    Selection
    RTLgen
    Inlining
    ValueDomain
    Tailcall
    Allocation
    Bounds
    Ctypes
    Csyntax
    Ctyping
    Clight
    Compiler
    Parser
    Initializers.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Standard lib *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> ExtrOcamlBasic.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> ExtrOcamlString.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Coqlib *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Coqlib.proj_sumbool =&gt; <span class="s2">&quot;(fun x -&gt; x)&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Datatypes *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Datatypes.fst =&gt; <span class="s2">&quot;fst&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Datatypes.snd =&gt; <span class="s2">&quot;snd&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Decidable *)</span>

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction Inline</span> DecidableClass.Decidable_witness DecidableClass.decide
   Decidableplus.Decidable_and Decidableplus.Decidable_or
   Decidableplus.Decidable_not Decidableplus.Decidable_implies.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Wfsimpl *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction Inline</span> Wfsimpl.Fix Wfsimpl.Fixm.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Memory - work around an extraction bug. *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction NoInline</span> Memory.Mem.valid_pointer.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Errors *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction Inline</span> Errors.bind Errors.bind2.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Iteration *)</span>

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Iteration.GenIter.iterate =&gt;
  <span class="s2">&quot;let rec iter f a =</span>
<span class="s2">     match f a with Coq_inl b -&gt; Some b | Coq_inr a&#39; -&gt; iter f a&#39;</span>
<span class="s2">   in iter&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Selection *)</span>

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Selection.compile_switch =&gt; <span class="s2">&quot;Switchaux.compile_switch&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Selection.if_conversion_heuristic =&gt; <span class="s2">&quot;Selectionaux.if_conversion_heuristic&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* RTLgen *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> RTLgen.more_likely =&gt; <span class="s2">&quot;RTLgenaux.more_likely&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction Inline</span> RTLgen.ret RTLgen.error RTLgen.bind RTLgen.bind2.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Inlining *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Inlining.should_inline =&gt; <span class="s2">&quot;Inliningaux.should_inline&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Inlining.inlining_info =&gt; <span class="s2">&quot;Inliningaux.inlining_info&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Inlining.inlining_analysis =&gt; <span class="s2">&quot;Inliningaux.inlining_analysis&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction Inline</span> Inlining.ret Inlining.bind.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Allocation *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Allocation.regalloc =&gt; <span class="s2">&quot;Regalloc.regalloc&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Linearize *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Linearize.enumerate_aux =&gt; <span class="s2">&quot;Linearizeaux.enumerate_aux&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* SimplExpr *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> SimplExpr.first_unused_ident =&gt; <span class="s2">&quot;Camlcoq.first_unused_ident&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction Inline</span> SimplExpr.ret SimplExpr.error SimplExpr.bind SimplExpr.bind2.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Compopts *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.optim_for_size =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_Osize&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.va_strict =&gt;
  <span class="s2">&quot;fun _ -&gt; false&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.propagate_float_constants =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_ffloatconstprop &gt;= 1&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.generate_float_constants =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_ffloatconstprop &gt;= 2&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.optim_tailcalls =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_ftailcalls&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.optim_constprop =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_fconstprop&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.optim_CSE =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_fcse&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.optim_redundancy =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_fredundancy&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.thumb =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_mthumb&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compopts.<span class="kn">debug</span> =&gt;
  <span class="s2">&quot;fun _ -&gt; !Clflags.option_g&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Compiler *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.print_Clight =&gt; <span class="s2">&quot;PrintClight.print_if&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.print_Cminor =&gt; <span class="s2">&quot;PrintCminor.print_if&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> driver.Compiler.print_RTL =&gt; <span class="s2">&quot;PrintRTL.print_if&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.print_RTL =&gt; <span class="s2">&quot;PrintRTL.print_if&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.print_RTLBlock =&gt; <span class="s2">&quot;PrintRTLBlock.print_if&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.print_HTL =&gt; <span class="s2">&quot;PrintHTL.print_if&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.print_LTL =&gt; <span class="s2">&quot;PrintLTL.print_if&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.print_Mach =&gt; <span class="s2">&quot;PrintMach.print_if&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.print =&gt; <span class="s2">&quot;fun (f: &#39;a -&gt; unit) (x: &#39;a) -&gt; f x; x&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Compiler.<span class="kp">time</span>  =&gt; <span class="s2">&quot;Timing.time_coq&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Vericertlib.debug_print =&gt; <span class="s2">&quot;print_newline&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(*Extraction Inline Compiler.apply_total Compiler.apply_partial.*)</span>

<span class="c">(* Cabs *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Cabs.loc =&gt;
<span class="s2">&quot;{ lineno : int;</span>
<span class="s2">   filename: string;</span>
<span class="s2">   byteno: int;</span>
<span class="s2">   ident : int;</span>
<span class="s2"> }&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Cabs.string =&gt; <span class="s2">&quot;String.t&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> Cabs.char_code =&gt; <span class="s2">&quot;int64&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Processor-specific extraction directives *)</span>

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Load</span> extractionMachdep.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Avoid name clashes *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction Blacklist</span> List String Int.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Cutting the dependency to R. *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Defs.F2R =&gt; <span class="s2">&quot;fun _ -&gt; assert false&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Binary.FF2R =&gt; <span class="s2">&quot;fun _ -&gt; assert false&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Binary.B2R =&gt; <span class="s2">&quot;fun _ -&gt; assert false&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Binary.round_mode =&gt; <span class="s2">&quot;fun _ -&gt; assert false&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Inlined Constant</span> Bracket.inbetween_loc =&gt; <span class="s2">&quot;fun _ -&gt; assert false&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> RTLBlockgen.partition =&gt; <span class="s2">&quot;Partition.partition&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extract Constant</span> HTLSchedulegen.transl_module =&gt; <span class="s2">&quot;Schedule.transl_module&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Needed in Coq 8.4 to avoid problems with Function definitions. *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kt">Set</span> <span class="kn">Extraction</span> AccessOpaque.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Cd</span> <span class="s2">&quot;src/extraction&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="extraction-v-chk0" style="display: none" type="checkbox"><label class="coq-input" for="extraction-v-chk0"><span class="highlight"><span class="kn">Separate Extraction</span>
         Verilog.module vericert.Compiler.transf_hls
         vericert.Compiler.transf_hls_temp
         vericert.Compiler.transf_hls_opt
         RTLBlockgen.transl_program RTLBlock.successors_instr
         HTLgen.tbl_to_case_expr

   Compiler.transf_c_program Compiler.transf_cminor_program
   Cexec.do_initial_state Cexec.do_step Cexec.at_final_state
   Ctypes.merge_attributes Ctypes.remove_attributes Ctypes.build_composite_env
   Initializers.transl_init Initializers.constval
   Csyntax.Eindex Csyntax.Epreincr Csyntax.Eselection
   Ctyping.typecheck_program
   Ctyping.epostincr Ctyping.epostdecr Ctyping.epreincr Ctyping.epredecr
   Ctyping.eselection
   Ctypes.make_program
   Clight.type_of_function
   Conventions1.callee_save_type Conventions1.is_float_reg
   Conventions1.int_caller_save_regs Conventions1.float_caller_save_regs
   Conventions1.int_callee_save_regs Conventions1.float_callee_save_regs
   Conventions1.dummy_int_reg Conventions1.dummy_float_reg
   RTL.instr_defs RTL.instr_uses
   Machregs.mregs_for_operation Machregs.mregs_for_builtin
   Machregs.two_address_op Machregs.is_stack_reg
   Machregs.destroyed_at_indirect_call
   AST.signature_main
   Floats.Float32.from_parsed Floats.Float.from_parsed
   Globalenvs.Senv.invert_symbol
   Parser.translation_unit_file.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-messages"><blockquote class="coq-message"><span class="highlight">The extraction <span class="kr">is</span> currently <span class="nb">set</span> to bypass opacity, the
following opaque constant bodies <span class="nb">have</span> been accessed
: solve_constraints_terminate.
 [extraction-opaque-accessed,extraction]</span></blockquote></div></div></small></span></pre>
</div>
</div></body>
</html>
